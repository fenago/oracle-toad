WITH AREPEATSUBQRY AS (
  SELECT S1.DEPT, S1.JOB, AVG(SALARY) "AVGSALARY"
   FROM STAFF S1
   WHERE S1.DEPT > 10
    GROUP BY S1.DEPT,S1.JOB)
  SELECT JOB,AVG(SALARY)
  FROM AREPEATSUBQRY
  WHERE DEPT IN
   (SELECT DEPT
    FROM AREPEATSUBRY
    WHERE  AVGSALARY > 12000)
/
